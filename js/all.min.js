var q;function u(a,b){this.v=a;this.i=b}function v(a){return[a.v*Math.cos(a.i),a.v*Math.sin(a.i)]}u.prototype.normalize=function(){return new u(1,this.i)};function aa(a){return new u(a.v,a.i+Math.PI)}function w(a,b,d,e){d=d/e;e=a.v*b.v*Math.cos(b.i-a.i);var f=0>e?-1:1;a=v(new u(a.v*d,a.i));d=v(new u(b.v*f*(Math.sqrt(1-Math.pow(d,2)*(1-Math.pow(e,2)))-f*d*e),b.i));b=a[0]+d[0];a=a[1]+d[1];return(new u(Math.sqrt(b*b+a*a),Math.atan2(a,b))).normalize()}var ba=1*Math.PI/6,ca=new u(1,ba),da=new u(1,Math.PI);
console.log("Scalar Snell's:",180*Math.asin(3*Math.sin(ba))/Math.PI);console.log("Vector Snell's:",180*w(ca,da,3,1).i/Math.PI);function x(a,b,d,e){return Math.sqrt((a-d)*(a-d)+(b-e)*(b-e))}function y(a,b,d,e,f,h){return A(x(a,b,f,h)+x(d,e,f,h),x(a,b,d,e))}function B(a,b){return(a%b+b)%b}function A(a,b,d){null==d&&(d=.001);return Math.abs(a-b)<d}
function ea(a,b,d,e,f,h,g,k){var l,p,n,m,t={x:null,y:null};l=(k-h)*(d-a)-(g-f)*(e-b);if(0==l)return!1;p=b-h;n=a-f;m=(d-a)*p-(e-b)*n;p=((g-f)*p-(k-h)*n)/l;n=m/l;t.x=a+p*(d-a);t.y=b+p*(e-b);return 0<=p&&1>=p&&0<=n&&1>=n?t:!1}function C(a,b,d){a=B(a,2*Math.PI);b=B(b,2*Math.PI);return a>b?d>a||d<b:b>a?d<b&&d>a:d==b}function fa(a,b,d){this.x=a;this.y=b;this.ja=d;this.ga=50;this.reset()}
fa.prototype.reset=function(){this.a=this.x;this.b=this.y;this.i=this.ja;this.path=[[this.a,this.b]];this.n=1;ga(this);this.V=this.W=!1};function ga(a){for(var b=a.a,d=a.b,e=a.a+Number.MAX_SAFE_INTEGER*Math.cos(a.i),f=a.b+Number.MAX_SAFE_INTEGER*Math.sin(a.i),h=ha(D),g,k=0;4>k;k+=1)if(g=h[k],(g=ea(b,d,e,f,g.a,g.b,g.l,g.m))&&(!A(g.x,b,.001)||!A(g.y,d,.001))){a.l=Math.round(g.x);a.m=Math.round(g.y);break}}
function ja(a){ctx.strokeStyle="#e600e5";ctx.lineWidth=ka;ctx.beginPath();ctx.moveTo(a.path[0][0],a.path[0][1]);for(var b=1;b<a.path.length;b+=1)ctx.lineTo(a.path[b][0],a.path[b][1]),ctx.moveTo(a.path[b][0],a.path[b][1]);ctx.stroke()}function la(a,b,d,e,f){this.x=a;this.y=b;this.I=d;this.rotation=e;this.Y=f;this.G=[];f=d/f;for(var h=0;h<this.Y;h+=1)this.G.push(new fa(a-h*f*Math.sin(e),b-d/2+h*f*Math.cos(e),e))}
la.prototype.S=function(a,b){for(var d=this.G.length,e=0;e<d;e+=1)a:{var f=this.G[e],h=a,g=b,k=void 0,l=void 0;f.reset();for(var p=0;p<f.ga;p+=1){for(var k=f,n=h,m=void 0,t=[],z=n.length,l=0;l<z;l+=1)m=n[l].B(k),!m||A(m.x,k.a,.01)&&A(m.y,k.b,.01)||t.push(m);if(0<t.length){for(var m=n=void 0,z=t[0],ia=x(z.x,z.y,k.a,k.b),l=0;l<t.length;l+=1)m=t[l],n=x(m.x,m.y,k.a,k.b),n<ia&&(z=m,ia=n);k=z}else k=!1;if(k){f.path.push([k.x,k.y]);l=k.curve;if(0>k.element.n){"winwall"==k.element.type?f.W=!0:"losewall"==
k.element.type&&(f.V=!0);ja(f);break a}t=new u(1,f.i);l=k.element.A(l,k.x,k.y);n=0>t.v*l.v*Math.cos(l.i-t.i)?k.element.n:1;m=w(t,l,f.n,n);isNaN(m.i)?(n=f.n,m=aa(w(t,l,n,-1*n))):f.n=n;f.i=B(m.i,2*Math.PI);f.a=k.x;f.b=k.y;ga(f)}else break}for(p=0;p<g.length;p+=1)if((k=g[p].B(f))&&(!A(k.x,f.a,.01)||!A(k.y,f.b,.01))){f.path.push([k.x,k.y]);break}ja(f)}for(e=f=0;e<d;e+=1)if(this.G[e].W)f+=1;else if(this.G[e].V)return{win:!1,lose:!0};return f==this.Y?{win:!0,lose:!1}:{win:!1,lose:!1}};var E=!1,F=!1;
function G(a){this.canvas=a;this.width=a.width;this.height=a.height;this.u=a.getContext("2d");document.defaultView&&document.defaultView.getComputedStyle&&(this.ma=parseInt(document.defaultView.getComputedStyle(a,null).paddingLeft,10)||0,this.na=parseInt(document.defaultView.getComputedStyle(a,null).paddingTop,10)||0,this.ka=parseInt(document.defaultView.getComputedStyle(a,null).borderLeftWidth,10)||0,this.la=parseInt(document.defaultView.getComputedStyle(a,null).borderTopWidth,10)||0);var b=document.body.parentNode;
this.fa=b.offsetTop;this.ea=b.offsetLeft;this.valid=!1;this.j=[];this.K=!1;this.selection=null;this.U=this.T=0;var d=this;a.addEventListener("selectstart",function(a){a.preventDefault();return!1},!1);a.addEventListener("mousedown",function(a){F||(F=!0);var b=H(d,a);a=b.x;b=b.y;if("planoconvex"==I)a=new J(a,b,3*Math.PI/2,1.5,90,50,30),K(D,a),I="default";else if("planoconcave"==I)a=new L(a,b,3*Math.PI/2,1.5,90,50,30),K(d,a),I="default";else if("medium"==I)a=new M(a,b,150,150,0),K(d,a),I="default";else if("laser"==
I){var h=new la(a,b,80,0,15);D.X=h;I="default";D.valid=!1}else if("mirror"==I)a=new N(a,b,15,150,0),K(D,a),I="default";else if("wall"==I)a=new O(a,b,15,150,0),K(D,a),I="default";else{for(var g=d.j,h=g.length,h=h-1;0<=h;h--)if(g[h].contains(a,b)&&!g[h].da){g=g[h];P.element=g;P.display();Q?(d.ia=Math.atan2(b-g.y,a-g.x),d.ca=!0):(d.T=a-g.x,d.U=b-g.y,d.K=!0);d.selection=g;d.ha=d.selection.rotation;d.valid=!1;a=document.getElementById("attrBox");a.style.visibility="visible";return}d.selection&&(d.selection=
null,d.valid=!1,a=document.getElementById("attrBox"),a.style.visibility="hidden")}},!0);a.addEventListener("mousemove",function(a){F&&(R(d),F=!1);if(d.K){var b=H(d,a);d.selection.x=b.x-d.T;d.selection.y=b.y-d.U;d.valid=!1}else if(d.ca)b=H(d,a),d.selection.R(d.ha+Math.atan2(b.y-d.selection.y,b.x-d.selection.x)-d.ia),d.valid=!1;else{b=H(d,a);a=b.x;for(var b=b.y,h=d.j,g=h.length-1;0<=g;g--)if(h[g].contains(a,b)&&!h[g].da){E=!0;return}E=!1}},!0);a.addEventListener("mouseup",function(){F=!1;d.K=!1;d.ca=
!1},!0);requestAnimationFrame(this.f.bind(this))}function K(a,b){R(a);a.j.push(b);a.valid=!1}G.prototype.clear=function(){this.u.clearRect(0,0,this.width,this.height)};
G.prototype.f=function(){if(Q&&E){var a=document.getElementsByTagName("body")[0];a.style.cursor="url('images/cursor.png') 9 10, auto"}else"default"==I&&(a=document.getElementsByTagName("body")[0],a.style.cursor="default");if(!this.valid){c=1;var a=this.u,b=this.j;this.clear();for(var d=b.length,e=0;e<d;e++)b[e].f(a);null!=this.selection&&this.selection.M(a);this.X&&(a=this.S(this.X),a.pa&&playing?(window.confirm("You Win!")&&(curLevel+=1,curLevel=B(curLevel,numLevels)),startLevel(curLevel)):a.oa&&
playing&&0!=c&&(alert("You Lose!"),startLevel(curLevel)));this.valid=!0}requestAnimationFrame(this.f.bind(this))};function H(a,b){var d=a.canvas,e=0,f=0;if(void 0!==d.offsetParent){do e+=d.offsetLeft,f+=d.offsetTop;while(d=d.offsetParent)}e+=a.ma+a.ka+a.ea;f+=a.na+a.la+a.fa;return{x:b.pageX-e,y:b.pageY-f}}function ha(a){var b=[];b.push(new S(0,0,a.width,0));b.push(new S(0,0,0,a.height));b.push(new S(a.width,0,a.width,a.height));b.push(new S(0,a.height,a.width,a.height));return b}
G.prototype.S=function(a){return a.S(this.j,ha(this))};function T(a){for(var b=[],d=a.j.length,e=0;e<d;e++)b.push(a.j[e].J());return b}function R(a){var b=T(a);U=[];V.push(b);a.valid=!1}function S(a,b,d,e){this.a=a;this.b=b;this.l=d;this.m=e;this.type="line"}S.prototype.B=function(a){return(a=ea(a.a,a.b,a.l,a.m,this.a,this.b,this.l,this.m))?{x:a.x,y:a.y,curve:this}:!1};S.prototype.A=function(){return new u(1,Math.atan2(this.l-this.a,this.b-this.m))};S.prototype.f=function(a){a.lineTo(this.l,this.m)};
function W(a,b,d,e,f){this.x=a;this.y=b;this.r=d;this.rotation=e;this.g=f;this.type="arc";X(this)}function X(a){var b=a.r,d=2*b*Math.sin(a.g/2),e=-2*b,b=b-(-e-Math.sqrt(e*e-d*d/4*4))/2/2;a.o=a.x+b*Math.sin(a.rotation);a.s=a.y-b*Math.cos(a.rotation);b=(Math.PI-a.g)/2;a.Z=a.r*Math.cos(a.rotation+b)+a.o;a.aa=a.r*Math.sin(a.rotation+b)+a.s;a.$=a.r*Math.cos(a.rotation+b+a.g)+a.o;a.ba=a.r*Math.sin(a.rotation+b+a.g)+a.s}W.prototype.A=function(a,b){return new u(1,Math.atan2(b-this.s,a-this.o))};
W.prototype.f=function(a){X(this);var b=(Math.PI-this.g)/2;a.arc(this.o,this.s,this.r,this.rotation+b,this.rotation+b+this.g)};function Element(a,b,d,e){this.x=a;this.y=b;this.rotation=d;this.n=e}function Y(a,b,d,e,f,h,g,k){Element.apply(this,arguments);this.h=f;this.I=h;this.C=g;this.D=k;this.attributes=["w","h","n"];this.w()}q=Y.prototype;q.J=function(){return new Y(this.x,this.y,this.rotation,this.n,this.h,this.I,this.C,this.D)};q.H=function(a,b){this[a]=b;this.w();D.valid=!1};
q.w=function(){var a=this.I,b=this.h,d=this.rotation,e=this.x+a*Math.sin(d)/2-b*Math.cos(d)/2,f=this.y-a*Math.cos(d)/2-b*Math.sin(d)/2,h=e-a*Math.sin(d),g=f+a*Math.cos(d),k=e+b*Math.cos(d),b=f+b*Math.sin(d),l=k-a*Math.sin(d),a=b+a*Math.cos(d);this.c=[];this.c.push(new S(e,f,h,g));this.c.push(new S(h,g,l,a));this.c.push(new S(l,a,k,b));this.c.push(new S(k,b,e,f))};q.R=function(a){this.rotation=B(a,2*Math.PI)};
q.f=function(a){this.w();this.o=this.x;this.s=this.y;var b=this.c,d=a.createLinearGradient(this.x,this.y,this.x,this.y+this.I);d.addColorStop(0,this.C);d.addColorStop(1,this.D);a.fillStyle=d;d=this.path=new Path2D;a.beginPath();for(var e=0;e<b.length;e+=1)b[e].f(d);a.fill(d)};q.M=function(a){this.w();var b=this.c,d=new Path2D;a.beginPath();a.strokeStyle="purple";a.lineWidth=2;d.moveTo(b[0].a,b[0].b);for(var e=0;e<b.length;e+=1)b[e].f(d);a.stroke(d);this.path=d};
q.B=function(a){for(var b,d=[],e=0;4>e;e+=1)b=this.c[e],b=b.B(a),!b||A(b.x,a.a,.1)&&A(b.y,a.b,.1)||d.push(b);if(d.length){for(var f,h=d[0],g=x(h.x,h.y,a.a,a.b),e=0;e<d.length;e+=1)f=d[e],b=x(f.x,f.y,a.a,a.b),b<g&&(h=f,g=b);h.element=this;return h}return!1};q.contains=function(a,b){return D.u.isPointInPath(this.path,a,b)};q.A=function(a){return a.A()};function N(a,b,d,e,f){Y.apply(this,[a,b,f,0,d,e,"#a3c2c2","#d1e0e0"])}N.prototype=Y.prototype;N.prototype.constructor=N;
function M(a,b,d,e,f){Y.apply(this,[a,b,f,1.33,d,e,"#33cccc","#ccffcc"])}M.prototype=Y.prototype;M.prototype.constructor=M;function O(a,b,d,e,f){Y.apply(this,[a,b,f,-1,d,e,"#1f2e2e","#1f2e2e"]);this.type="wall";this.da=!0}O.prototype=Y.prototype;O.prototype.constructor=O;
function J(a,b,d,e,f,h,g){Element.apply(this,arguments);this.r=f;this.h=g;this.C="#33cccc";this.D="#ccffcc";this.rotation=d;this.h=g;this.F=h;this.attributes=["r","semi_diameter","n","w"];this.g=2*Math.asin(h/f);var k=h,k=f-Math.sqrt(f*f-k*k),k=(k+g-k)/2;this.arc=new W(a-k*Math.sin(d)/2,b+k*Math.cos(d)/2,f,d,this.g);this.f(D.u)}q=J.prototype;q.J=function(){return new J(this.x,this.y,this.rotation,this.n,this.r,this.F,this.h)};q.H=function(a,b){this[a]=b;D.valid=!1;this.f(D.u)};
q.w=function(){var a=this.arc.Z,b=this.arc.aa,d=a+this.h*Math.sin(this.rotation),e=b-this.h*Math.cos(this.rotation),f=this.arc.$,h=this.arc.ba,g=f+this.h*Math.sin(this.rotation),k=h-this.h*Math.cos(this.rotation);this.c=[];this.c.push(new S(a,b,d,e));this.c.push(new S(d,e,g,k));this.c.push(new S(g,k,f,h))};q.P=function(){this.g=2*Math.asin(this.F/this.r);this.arc.x=this.x-this.h*Math.sin(this.rotation)/2;this.arc.y=this.y+this.h*Math.cos(this.rotation)/2;this.arc.g=this.g;this.arc.r=this.r};
q.L=function(){X(this.arc);this.o=this.arc.o;this.s=this.arc.s};q.f=function(a){this.P();this.L();this.w();var b=a.createLinearGradient(this.x,this.y,this.x+this.r,this.y+this.r);b.addColorStop(0,this.C);b.addColorStop(1,this.D);a.fillStyle=b;var b=this.c,d=new Path2D;a.beginPath();this.arc.f(d);d.moveTo(b[0].a,b[0].b);for(var e=0;e<b.length;e+=1)b[e].f(d);a.fill(d);this.path=d};q.R=function(a){this.rotation=B(a,2*Math.PI);this.arc.rotation=this.rotation};
q.contains=function(a,b){return D.u.isPointInPath(this.path,a,b)};q.M=function(a){a.strokeStyle="purple";a.lineWidth=2;var b=this.c,d=new Path2D;a.beginPath();this.arc.f(d);d.moveTo(b[0].a,b[0].b);for(var e=0;e<b.length;e+=1)b[e].f(d);a.stroke(d);this.path=d};q.B=function(a){var b=this.O(a),d=this.N(a);boxDist=x(b.x,b.y,a.a,a.b);arcDist=x(d.x,d.y,a.a,a.b);.001>boxDist&&(b=!1);.001>arcDist&&(d=!1);return!1===b&&!1===d?!1:!1===b?d:!1===d?b:boxDist<arcDist?b:d};
q.O=function(a){for(var b,d=[],e=0;e<this.c.length;e+=1)b=this.c[e],b=b.B(a),!b||A(b.x,a.a,.1)&&A(b.y,a.b,.1)||d.push(b);if(d.length){for(var f,h=d[0],g=x(h.x,h.y,a.a,a.b),e=0;e<d.length;e+=1)f=d[e],b=x(f.x,f.y,a.a,a.b),b<g&&(h=f,g=b);h.element=this;return h}return!1};
q.N=function(a){var b=(Math.PI-this.g)/2,d=a.a,e=a.l,f=a.b,h=a.m,g=this.o,k=this.s,l=this.r,p=e-d,n=h-f,m=p*p+n*n,t=2*(p*(d-g)+n*(f-k)),z=t*t-4*m*((d-g)*(d-g)+(f-k)*(f-k)-l*l),n=(-t+Math.sqrt(z))/(2*m),m=(-t-Math.sqrt(z))/(2*m),n=d+n*p,m=d+m*p;if(n||0==n){0==e-d?(e=Math.sqrt(l*l-Math.pow(d-g,2))+k,p=-Math.sqrt(l*l-Math.pow(d-g,2))+k):(l=(h-f)/(e-d),e=l*(n-d)+f,p=l*(m-d)+f);l={x:n,y:e,curve:this.arc,element:this};h={x:m,y:p,curve:this.arc,element:this};x(n,e,d,f)<x(m,p,d,f)||A(m,a.a,.1)&&A(p,a.b,.1)?
(d=l,f=h):(d=h,f=l);m=B(Math.atan2(d.y-k,d.x-g),2*Math.PI);if(C(this.rotation+b,this.rotation+b+this.g,m)&&y(a.a,a.b,a.l,a.m,d.x,d.y))return d;m=B(Math.atan2(f.y-k,f.x-g),2*Math.PI);if(C(this.rotation+b,this.rotation+b+this.g,m)&&y(a.a,a.b,a.l,a.m,f.x,f.y))return f}return!1};q.A=function(a,b,d){return a.A(b,d)};
function L(a,b,d,e,f,h,g){Element.apply(this,arguments);this.r=f;this.h=g;this.C="#33cccc";this.D="#ccffcc";this.rotation=d;this.h=g;this.F=h;this.attributes=["r","semi_diameter","n","w"];this.g=2*Math.asin(h/f);var k=g/2;this.arc=new W(a-k*Math.sin(d),b+k*Math.cos(d),f,d+Math.PI,this.g+Math.PI);this.f(D.u)}q=L.prototype;q.J=function(){return new L(this.x,this.y,this.rotation,this.n,this.r,this.F,this.h)};
q.H=function(a,b){this[a]=b;var d=this.F,d=this.r-Math.sqrt(this.r*this.r-d*d);this.h<d&&(this.h=d);D.valid=!1;this.f(D.u)};q.w=function(){var a=this.arc.Z,b=this.arc.aa,d=a+this.h*Math.sin(this.rotation),e=b-this.h*Math.cos(this.rotation),f=this.arc.$,h=this.arc.ba,g=f+this.h*Math.sin(this.rotation),k=h-this.h*Math.cos(this.rotation);this.c=[];this.c.push(new S(a,b,d,e));this.c.push(new S(d,e,g,k));this.c.push(new S(g,k,f,h))};
q.P=function(){this.g=2*Math.asin(this.F/this.r);var a=this.h/2;this.arc.x=this.x-a*Math.sin(this.rotation);this.arc.y=this.y+a*Math.cos(this.rotation);this.arc.g=this.g;this.arc.r=this.r};q.L=function(){X(this.arc);this.o=this.arc.o;this.s=this.arc.s};
q.f=function(a){this.P();this.L();this.w();var b=a.createLinearGradient(this.x,this.y,this.x+this.r,this.y+this.r);b.addColorStop(0,this.C);b.addColorStop(1,this.D);a.fillStyle=b;var b=this.c,d=new Path2D;a.beginPath();this.arc.f(d);d.lineTo(b[2].a,b[2].b);for(var e=b.length-1;0<=e;--e)b[e].f(d);a.fill(d);this.path=d};q.R=function(a){this.rotation=B(a,2*Math.PI);this.arc.rotation=this.rotation+Math.PI};q.contains=function(a,b){return D.u.isPointInPath(this.path,a,b)};
q.M=function(a){a.strokeStyle="purple";a.lineWidth=2;var b=this.c,d=new Path2D;a.beginPath();this.arc.f(d);d.moveTo(b[0].a,b[0].b);for(var e=0;e<b.length;e+=1)b[e].f(d);a.stroke(d);this.path=d};q.B=function(a){var b=this.O(a),d=this.N(a);boxDist=x(b.x,b.y,a.a,a.b);arcDist=x(d.x,d.y,a.a,a.b);.001>boxDist&&(b=!1);.001>arcDist&&(d=!1);return!1===b&&!1===d?!1:!1===b?d:!1===d?b:boxDist<arcDist?b:d};
q.O=function(a){for(var b,d=[],e=0;e<this.c.length;e+=1)b=this.c[e],b=b.B(a),!b||A(b.x,a.a,.1)&&A(b.y,a.b,.1)||d.push(b);if(d.length){for(var f,h=d[0],g=x(h.x,h.y,a.a,a.b),e=0;e<d.length;e+=1)f=d[e],b=x(f.x,f.y,a.a,a.b),b<g&&(h=f,g=b);h.element=this;return h}return!1};
q.N=function(a){var b=(Math.PI-this.g)/2,d=a.a,e=a.l,f=a.b,h=a.m,g=this.o,k=this.s,l=this.r,p=e-d,n=h-f,m=p*p+n*n,t=2*(p*(d-g)+n*(f-k)),z=t*t-4*m*((d-g)*(d-g)+(f-k)*(f-k)-l*l),n=(-t+Math.sqrt(z))/(2*m),m=(-t-Math.sqrt(z))/(2*m),n=d+n*p,m=d+m*p;if(n||0==n){0==e-d?(e=Math.sqrt(l*l-Math.pow(d-g,2))+k,p=-Math.sqrt(l*l-Math.pow(d-g,2))+k):(l=(h-f)/(e-d),e=l*(n-d)+f,p=l*(m-d)+f);l={x:n,y:e,curve:this.arc,element:this};h={x:m,y:p,curve:this.arc,element:this};x(n,e,d,f)<x(m,p,d,f)||A(m,a.a,.1)&&A(p,a.b,.1)?
(d=l,f=h):(d=h,f=l);m=B(Math.atan2(d.y-k,d.x-g),2*Math.PI);if(C(this.rotation+b,this.rotation+b+this.g,m)&&y(a.a,a.b,a.l,a.m,d.x,d.y))return f;m=B(Math.atan2(f.y-k,f.x-g),2*Math.PI);if(C(this.rotation+b,this.rotation+b+this.g,m)&&y(a.a,a.b,a.l,a.m,f.x,f.y))return d}return!1};q.A=function(a,b,d){return aa(a.A(b,d))};function Z(){this.element=void 0;this.display()}Z.prototype.H=function(a){var b=a.srcElement.parentNode.parentNode.children[0].innerHTML;a=a.srcElement.value;R(D);this.element.H(b,a)};
Z.prototype.display=function(){var a=document.getElementById("attrBox"),b=document.createElement("hello");if(this.element){var d=this.element.attributes,e;for(e in this.element)if(-1<d.indexOf(e)){var f=document.createElement("tr"),h=f.insertCell(0),g=f.insertCell(1);h.innerHTML=e;g.innerHTML+='<input type="text" name="fname">';g.children[0].value=this.element[e];g.contentEditable="true";g.children[0].addEventListener("input",this.H.bind(this),!1);b.appendChild(f)}a.replaceChild(b,a.children[0])}};
var D,I="default",ka=3,Q=!1,P,V=[],U=[];function ma(){var a=document.getElementById("wrap_video"),b=document.getElementById("myVideo"),d=document.getElementById("skip");b.onended=function(){a.remove()};d.onclick=function(){a.remove()};b.load()}
function na(){var a=document.getElementsByTagName("body")[0];document.getElementById("planoconvex").onclick=function(){a.style.cursor="url('images/planoconvexcursor.png') 50 50, auto";I="planoconvex"};document.getElementById("planoconcave").onclick=function(){a.style.cursor="url('images/planoconcavecursor.png') 30 30, auto";I="planoconcave"};document.getElementById("medium").onclick=function(){a.style.cursor="url('images/mediumcursor.png') 50 50, auto";I="medium"};document.getElementById("laser").onclick=
function(){a.style.cursor="url('images/laser_pointer_small.png') 25 25, auto";I="laser"};document.getElementById("mirror").onclick=function(){a.style.cursor="url('images/mirror.png') 25 25, auto";I="mirror"};document.getElementById("wall").onclick=function(){a.style.cursor="url('images/wall.png') 50 50, auto";I="wall"}}
function oa(){window.addEventListener("keydown",function(a){if(a.shiftKey)Q=!0;else if(46==a.keyCode){a=D;var b=D.selection;R(a);for(var d=0;d<a.j.length;d+=1)a.j[d]==b&&a.j.splice(d,1);a.selection=null;a.valid=!1}else 90==a.keyCode&&a.ctrlKey?(a=D,V.length&&(U.push(T(a)),a.j=V.pop(),a.selection=null,a.valid=!1)):89==a.keyCode&&a.ctrlKey&&(a=D,U.length&&(b=U.pop(),V.push(T(a)),a.j=b,a.selection=null,a.valid=!1))},!0);window.addEventListener("keyup",function(a){Q&&!a.shiftKey&&(Q=!1)},!0);window.onmousedown=
function(){document.getElementsByTagName("body")[0].style.cursor="default"}}document.addEventListener("DOMContentLoaded",function(){ma();na();ctx=document.getElementById("myCanvas").getContext("2d");ctx.canvas.width=window.innerWidth-100;ctx.canvas.height=window.innerHeight-10;D=new G(document.getElementById("myCanvas"));P=new Z;oa()},!1);
